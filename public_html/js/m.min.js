var c2_fixed=false,plane_html="",windowWidth=0,animationsOn=false,$plane=null,$sun=null,$sun_wrap=null,$header=null,transformPrefix="";function GetVendorPrefix(a){var c=document.createElement("div");for(var b=0;b<a.length;++b){if(typeof c.style[a[b]]!="undefined"){return a[b]}}return false}function init_animations(){animationsOn=true;$("#buildings_wrap,#pods_wrap").show();$("#pods").addClass("spin");$("#stop_css3").show();drawSun();var a=(new Date()).getTime();animate($plane,a)}function drawSun(){if(!Modernizr.canvas){return}$sun=$("#sun");$sunWrap=$("#sun_wrap");$header=$("header");var a=$header.height();$sun.width(windowWidth);$sun.height(a);$sun.css("height",a+"px");_drawSunburst($sun[0])}function stop_animations(a){animationsOn=false;$("#pods").removeClass("spin");if((a!==undefined)&&a){$("#buildings_wrap").fadeOut(2000)}else{$("#buildings_wrap").hide()}$("#stop_css3").hide()}window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b,a){window.setTimeout(b,1000/60)}})();function animate(b,e){var h=(new Date()).getTime()-e;var d=120;var g=(d*h/1000)-100;var f=(Math.sin((g/(windowWidth/2))-0.5))*100;var a=0.001;var c=a*h;if(g>windowWidth+200){e=(new Date()).getTime()}$plane.style[transformPrefix]="translate3d("+g+"px, "+f+"px, 0)";_drawSunburst($sun[0],{},c);if(animationsOn){requestAnimFrame(function(){animate($plane,e)})}}$(document).ready(function(){transformPrefix=GetVendorPrefix(["transform","WebkitTransform","msTransform","MozTransform","OTransform"]);if(transformPrefix){var b='<div class="plane_light"></div>';for(var a=0;a<20;a++){plane_html+=b}plane_html+='<div class="plane_tail_light"></div>';plane_html+='<div class="plane_wing_light"></div>';plane_html+='<div class="plane_btm_light"></div>';$(".plane_lights_wrap").append(plane_html);$("#stop_css3").click(function(){stop_animations(true)});$plane=$(".plane_wrap")[0];Modernizr.load([{test:Modernizr.cssgradients,nope:["css/gradients.css"]}])}window._gaq=[["_setAccount","UA-17716290-10"],["_trackPageview"],["_trackPageLoadTime"]];Modernizr.load({load:("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js"});$(window).bind("resize",function(){windowWidth=$(this).width();if((windowWidth<=480)&&animationsOn){stop_animations(false)}else{if(Modernizr.cssanimations&&(windowWidth>480)&&(!animationsOn)){init_animations()}else{drawSun()}}});$(window).trigger("resize")});var _drawTriangle=function(a,b,c){a.beginPath();a.moveTo(0,0);xPos=(b/100)*c;xNeg=-1*xPos;a.lineTo(c*Math.sqrt(2),xNeg);a.lineTo(c*Math.sqrt(2),xPos);a.fill()};var _drawSunburst=function(a,m,c){var k=function(i,n){if("undefined"==typeof i){return n}return i};var l=a.getContext("2d");l.save();m=k(m,{});var j=k(m.bars,36);var b=k(m.fatness,5);var g=Math.round(Math.sin(c%360)*255);console.log(g);var d=k(m.color,"rgba(14, 111, "+g+",0.2)");var h=k(m.backcolor,"rgba(255,255,255,0.5)");width=a.width;height=a.height*2;var f=(height>width?height:width);l.translate(width/2,height/2);l.fillStyle=h;l.fillRect(-1*(width/2),-1*(height/2),width,height);l.fillStyle=d;for(var e=0;e<j;e++){l.save();if(c==null){c=1}l.rotate(e*(Math.PI*2/j));_drawTriangle(l,b,f);l.restore()}l.restore()};