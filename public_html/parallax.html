<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="utf-8">
	<title>Andy Shora, Front-end Web Developer in London</title>
	<link rel="stylesheet" href="assets/css/main.css">
	<link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet" type="text/css">
	<link rel="shortcut icon" href="/favicon.ico" />
	<meta name="description" content="Andy Shora, Front-end Web Developer in London">
	<meta name="author" content="Andy Shora">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

	<script src="assets/js/modernizr-min.js"></script>
	<!--[if lt IE 9]>
	<meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1">
	<script src="js/html5shiv.js" type="text/javascript"></script>
	<![endif]-->

	<script src="assets/js/jquery-1.9.1.min.js"></script>

	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<!--[if lt IE 7 ]><script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
	<script>window.attachEvent("onload",function(){CFInstall.check({mode:"overlay"})});</script><![endif]-->

</head>
<body>

<div id="body_wrap">

	<header class="page-header">
		<div class="page-header__title">
			<h1>Parallax effects in web design</h1>
			<p>Using RequestAnimationFrame and Hardware-accellerated CSS3 Transforms</p>
		</div>
	</header>

	<div id="offset-bottom"></div>
	<div id="scroll-top"></div>

	<section>
		<h2>How to implement parallax effects on scroll using JavaScript &amp; CSS3</h2>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Praesentium autem ipsum deserunt. Ratione, ut, nihil, numquam molestiae placeat odit non voluptatum sed quos natus rem asperiores minima porro fugit praesentium quo omnis doloribus est accusantium officiis. Minus, iste labore recusandae consequatur sit sint dolore rem quisquam. Illum, architecto, maiores corrupti quos consectetur animi aperiam neque excepturi quis nihil vitae optio quas quam expedita blanditiis aliquam earum esse voluptatum necessitatibus dignissimos soluta eos minima provident officia voluptatem voluptas aut qui commodi recusandae culpa voluptatibus non saepe facere ipsam nemo totam eius ad amet dolorum incidunt quaerat tempore. Dolorem, commodi illo quis.</p>

	</section>

	<h4>Demo 1. Let's make the red ball fall into a pipe when the user scrolls down the page</h4>
	<section class="demo parallax1">
		<div class="parallax ball" data-id="ball-1" data-start="200" data-stop="700"></div>
		<!--<div class="parallax ball" data-id="ball-2" data-start="20" data-stop="1000" data-speed="1.1"></div>-->
	</section>

	<section>
		<h3>Applying CSS3 transforms on touchmove (swipe) events</h3>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Impedit, voluptatibus id eius repellat porro recusandae tempora voluptate quidem fuga maiores.</p>
<pre class="prettyprint lang-js">
function moveBalls(y) {

	for (var i=0; i<balls.length; i++) {
		if ((y>$(balls[i]).data('start'))&&(y<=$(balls[i]).data('stop'))) {
			var speedMultiplier = $(balls[i]).data('speed');

			if (!speedMultiplier) {
				speedMultiplier = 1;
			}

			$(balls[i]).css({ WebkitTransform: 'translateY('+(y*speedMultiplier)+'px)' }).html(window.scrollY);
		}
	}

}
</pre>
		<h3>Using RequestAnimationFrame to make animations smoother</h3>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Impedit, voluptatibus id eius repellat porro recusandae tempora voluptate quidem fuga maiores.</p>
		<h3>Handling the logic and setting breakpoints of a parallax animation</h3>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Impedit, voluptatibus id eius repellat porro recusandae tempora voluptate quidem fuga maiores.</p>
	</section>

	<section>
		<h2>Considerations</h2>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Praesentium, dolor, dolorem! Assumenda, aut laborum adipisci et quae obcaecati officiis numquam.</p>
		<h3>Responsive Design</h3>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Tempora debitis repellendus in vel odit totam unde placeat necessitatibus quibusdam enim.</p>
		<h3>Performance</h3>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quod, et!</p>
		<h3>Old Browsers &amp; Slow Machines</h3>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Labore sapiente at explicabo iusto quaerat quam.</p>
	</section>

</div>
<div class="author-wrap">
	<section class="author">
		<div class="author__pic"></div>
		<div class="author__desc">
			<p>Hi, I'm <strong>Andy Shora</strong>. I'm a <strong>Frontend Web Developer</strong> based in London and I currently work with some very talented people over at <a href="http://www.rga.com">R/GA</a>.</p>
			<div class="author__links">
				<a class="author__link" href="http://twitter.com/andyshora"><i class="icon-twitter"></i> @andyshora</a>
				<a class="author__link" href="http://www.facebook.com/andyshora"><i class="icon-facebook"></i> fb<span class="link__extra">.com/andyshora</span></a>
				<a class="author__link" href="http://www.pinterest.com/andyshora"><i class="icon-pinterest"></i> pinterest<span class="link__extra">.com/andyshora</span></a>
				<a class="author__link" href="http://www.github.com/andyshora"><i class="icon-github"></i> github<span class="link__extra">.com/andyshora</span></a>
				<a class="author__link" id="revealEmail()"><i class="icon-envelope"></i> contact<span class="link__extra"> me</span></a>
			</div>
		</div>
	</section>
</div>

<section class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

		var pArr = [];
		var windowHeight = 0;

		$(document).ready(function() {

			windowHeight = $(window).height();

			$('html,body').scrollTop(0);

			$(window)
				.scroll(function(e) {
					moveBalls($(this).scrollTop());
				})
				.resize(function() {
					windowHeight = $(this).height();
				});


			// init values to minimise DOM interactions on scroll events
			$('.parallax').each(function(){

				$elm = $(this);
				var id = $elm.data('id');
				pArr[id] = {
					id: $elm.data('id'),
					start: $elm.data('start'),
					stop: $elm.data('stop'),
					speed: $elm.data('speed'),
					elm: $elm[0],
					initialOffsetY: $elm.offset().top,
					height: $elm.height()
				};

			});
		});

		function moveBalls(scrollTop) {

			var len = pArr.length;

			// update UI
			document.getElementById('scroll-top').innerHTML = 'scrollTop: ' + scrollTop;

			for (var id in pArr) {

				// distance of element from top of viewport
				var viewportOffsetTop = pArr[id].initialOffsetY - scrollTop;

				// distance of element from bottom of viewport
				var viewportOffsetBottom = windowHeight - viewportOffsetTop;

				// update UI
				document.getElementById('offset-bottom').innerHTML = 'offsetBottom: ' + viewportOffsetBottom;

				if ((viewportOffsetBottom >= pArr[id].start) && (viewportOffsetBottom <= pArr[id].stop)) {

					var speedMultiplier = pArr[id].speed || 1;
					var pos = (windowHeight - pArr[id].start) * speedMultiplier;

					pArr[id].elm.style.position = 'fixed';
					pArr[id].elm.style.top = pos+'px';
					pArr[id].elm.style.marginLeft = '-24px';
					pArr[id].elm.style.backgroundColor = 'green';

				} else if (viewportOffsetBottom > pArr[id].stop) {

					pArr[id].elm.style.position = 'relative';
					pArr[id].elm.style.backgroundColor = 'blue';
					pArr[id].elm.style.top = (pArr[id].stop-pArr[id].start)+'px';
					pArr[id].elm.style.marginLeft = 0;

				} else if (viewportOffsetBottom < pArr[id].start) {
					pArr[id].elm.style.position = 'relative';
					pArr[id].elm.style.backgroundColor = 'red';
					pArr[id].elm.style.top = 0;
					pArr[id].elm.style.marginLeft = 0;
				}
			}

		}
	</script>
	<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=css&skin=sunburst"></script>
	<script type="text/javascript">
		/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		var disqus_shortname = 'andyshora'; // required: replace example with your forum shortname

		/* * * DON'T EDIT BELOW THIS LINE * * */
		(function() {
			if ((window.location+'').match(/dev\./g)) return;
			var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

<footer>
	<p>Andy Shora &copy; 2013</p>
</footer>
</body>
</html>
